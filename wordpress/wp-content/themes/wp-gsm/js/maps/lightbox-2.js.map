{"version":3,"sources":["lightbox-2.js"],"names":["$","Lightbox","LightboxOptions","jQuery","this","fadeDuration","fitImagesInViewport","resizeDuration","showImageNumberLabel","wrapAround","prototype","albumLabel","curImageNum","albumSize","options","album","currentImageIndex","init","enable","build","_this","on","e","start","currentTarget","appendTo","$lightbox","$overlay","$outerContainer","find","$container","containerTopPadding","parseInt","css","containerRightPadding","containerBottomPadding","containerLeftPadding","hide","end","target","attr","changeImage","length","$link","$window","a","dataLightboxValue","i","imageNumber","left","top","_i","_j","_len","_len1","_ref","_ref1","window","sizeOverlay","visibility","width","document","height","fadeIn","prop","push","link","title","scrollTop","scrollLeft","$image","preloader","disableKeyboardNav","addClass","Image","onload","$preloader","imageHeight","imageWidth","maxImageHeight","maxImageWidth","windowHeight","windowWidth","sizeContainer","src","newHeight","newWidth","oldHeight","oldWidth","outerWidth","outerHeight","animate","setTimeout","showImage","updateNav","updateDetails","preloadNeighboringImages","enableKeyboardNav","show","html","text","removeClass","preloadNext","preloadPrev","proxy","keyboardAction","off","event","KEYCODE_ESC","KEYCODE_LEFTARROW","KEYCODE_RIGHTARROW","key","keycode","keyCode","String","fromCharCode","toLowerCase","match","fadeOut","lightbox","call"],"mappings":"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","file":"lightbox-2.js","sourcesContent":["// Generated by CoffeeScript 1.6.3\r\n/*\r\nLightbox v2.6\r\nby Lokesh Dhakar - http://www.lokeshdhakar.com\r\n\r\nFor more information, visit:\r\nhttp://lokeshdhakar.com/projects/lightbox2/\r\n\r\nLicensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/\r\n- free for use in both personal and commercial projects\r\n- attribution requires leaving author name, author link, and the license info intact\r\n*/\r\n\r\n\r\n(function() {\r\n  var $, Lightbox, LightboxOptions;\r\n\r\n  $ = jQuery;\r\n\r\n  LightboxOptions = (function() {\r\n    function LightboxOptions() {\r\n      this.fadeDuration = 500;\r\n      this.fitImagesInViewport = true;\r\n      this.resizeDuration = 700;\r\n      this.showImageNumberLabel = true;\r\n      this.wrapAround = false;\r\n    }\r\n\r\n    LightboxOptions.prototype.albumLabel = function(curImageNum, albumSize) {\r\n      return \"���� \" + curImageNum + \" �� \" + albumSize;\r\n    };\r\n\r\n    return LightboxOptions;\r\n\r\n  })();\r\n\r\n  Lightbox = (function() {\r\n    function Lightbox(options) {\r\n      this.options = options;\r\n      this.album = [];\r\n      this.currentImageIndex = void 0;\r\n      this.init();\r\n    }\r\n\r\n    Lightbox.prototype.init = function() {\r\n      this.enable();\r\n      return this.build();\r\n    };\r\n\r\n    Lightbox.prototype.enable = function() {\r\n      var _this = this;\r\n      return $('body').on('click', 'a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]', function(e) {\r\n        _this.start($(e.currentTarget));\r\n        return false;\r\n      });\r\n    };\r\n\r\n    Lightbox.prototype.build = function() {\r\n      var _this = this;\r\n      $(\"<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>\").appendTo($('body'));\r\n      this.$lightbox = $('#lightbox');\r\n      this.$overlay = $('#lightboxOverlay');\r\n      this.$outerContainer = this.$lightbox.find('.lb-outerContainer');\r\n      this.$container = this.$lightbox.find('.lb-container');\r\n      this.containerTopPadding = parseInt(this.$container.css('padding-top'), 10);\r\n      this.containerRightPadding = parseInt(this.$container.css('padding-right'), 10);\r\n      this.containerBottomPadding = parseInt(this.$container.css('padding-bottom'), 10);\r\n      this.containerLeftPadding = parseInt(this.$container.css('padding-left'), 10);\r\n      this.$overlay.hide().on('click', function() {\r\n        _this.end();\r\n        return false;\r\n      });\r\n      this.$lightbox.hide().on('click', function(e) {\r\n        if ($(e.target).attr('id') === 'lightbox') {\r\n          _this.end();\r\n        }\r\n        return false;\r\n      });\r\n      this.$outerContainer.on('click', function(e) {\r\n        if ($(e.target).attr('id') === 'lightbox') {\r\n          _this.end();\r\n        }\r\n        return false;\r\n      });\r\n      this.$lightbox.find('.lb-prev').on('click', function() {\r\n        if (_this.currentImageIndex === 0) {\r\n          _this.changeImage(_this.album.length - 1);\r\n        } else {\r\n          _this.changeImage(_this.currentImageIndex - 1);\r\n        }\r\n        return false;\r\n      });\r\n      this.$lightbox.find('.lb-next').on('click', function() {\r\n        if (_this.currentImageIndex === _this.album.length - 1) {\r\n          _this.changeImage(0);\r\n        } else {\r\n          _this.changeImage(_this.currentImageIndex + 1);\r\n        }\r\n        return false;\r\n      });\r\n      return this.$lightbox.find('.lb-loader, .lb-close').on('click', function() {\r\n        _this.end();\r\n        return false;\r\n      });\r\n    };\r\n\r\n    Lightbox.prototype.start = function($link) {\r\n      var $window, a, dataLightboxValue, i, imageNumber, left, top, _i, _j, _len, _len1, _ref, _ref1;\r\n      $(window).on(\"resize\", this.sizeOverlay);\r\n      $('select, object, embed').css({\r\n        visibility: \"hidden\"\r\n      });\r\n      this.$overlay.width($(document).width()).height($(document).height()).fadeIn(this.options.fadeDuration);\r\n      this.album = [];\r\n      imageNumber = 0;\r\n      dataLightboxValue = $link.attr('data-lightbox');\r\n      if (dataLightboxValue) {\r\n        _ref = $($link.prop(\"tagName\") + '[data-lightbox=\"' + dataLightboxValue + '\"]');\r\n        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\r\n          a = _ref[i];\r\n          this.album.push({\r\n            link: $(a).attr('href'),\r\n            title: $(a).attr('title')\r\n          });\r\n          if ($(a).attr('href') === $link.attr('href')) {\r\n            imageNumber = i;\r\n          }\r\n        }\r\n      } else {\r\n        if ($link.attr('rel') === 'lightbox') {\r\n          this.album.push({\r\n            link: $link.attr('href'),\r\n            title: $link.attr('title')\r\n          });\r\n        } else {\r\n          _ref1 = $($link.prop(\"tagName\") + '[rel=\"' + $link.attr('rel') + '\"]');\r\n          for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {\r\n            a = _ref1[i];\r\n            this.album.push({\r\n              link: $(a).attr('href'),\r\n              title: $(a).attr('title')\r\n            });\r\n            if ($(a).attr('href') === $link.attr('href')) {\r\n              imageNumber = i;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      $window = $(window);\r\n      top = $window.scrollTop() + $window.height() / 10;\r\n      left = $window.scrollLeft();\r\n      this.$lightbox.css({\r\n        top: top + 'px',\r\n        left: left + 'px'\r\n      }).fadeIn(this.options.fadeDuration);\r\n      this.changeImage(imageNumber);\r\n    };\r\n\r\n    Lightbox.prototype.changeImage = function(imageNumber) {\r\n      var $image, preloader,\r\n        _this = this;\r\n      this.disableKeyboardNav();\r\n      $image = this.$lightbox.find('.lb-image');\r\n      this.sizeOverlay();\r\n      this.$overlay.fadeIn(this.options.fadeDuration);\r\n      $('.lb-loader').fadeIn('slow');\r\n      this.$lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').hide();\r\n      this.$outerContainer.addClass('animating');\r\n      preloader = new Image();\r\n      preloader.onload = function() {\r\n        var $preloader, imageHeight, imageWidth, maxImageHeight, maxImageWidth, windowHeight, windowWidth;\r\n        $image.attr('src', _this.album[imageNumber].link);\r\n        $preloader = $(preloader);\r\n        $image.width(preloader.width);\r\n        $image.height(preloader.height);\r\n        if (_this.options.fitImagesInViewport) {\r\n          windowWidth = $(window).width();\r\n          windowHeight = $(window).height();\r\n          maxImageWidth = windowWidth - _this.containerLeftPadding - _this.containerRightPadding - 20;\r\n          maxImageHeight = windowHeight - _this.containerTopPadding - _this.containerBottomPadding - 110;\r\n          if ((preloader.width > maxImageWidth) || (preloader.height > maxImageHeight)) {\r\n            if ((preloader.width / maxImageWidth) > (preloader.height / maxImageHeight)) {\r\n              imageWidth = maxImageWidth;\r\n              imageHeight = parseInt(preloader.height / (preloader.width / imageWidth), 10);\r\n              $image.width(imageWidth);\r\n              $image.height(imageHeight);\r\n            } else {\r\n              imageHeight = maxImageHeight;\r\n              imageWidth = parseInt(preloader.width / (preloader.height / imageHeight), 10);\r\n              $image.width(imageWidth);\r\n              $image.height(imageHeight);\r\n            }\r\n          }\r\n        }\r\n        return _this.sizeContainer($image.width(), $image.height());\r\n      };\r\n      preloader.src = this.album[imageNumber].link;\r\n      this.currentImageIndex = imageNumber;\r\n    };\r\n\r\n    Lightbox.prototype.sizeOverlay = function() {\r\n      return $('#lightboxOverlay').width($(document).width()).height($(document).height());\r\n    };\r\n\r\n    Lightbox.prototype.sizeContainer = function(imageWidth, imageHeight) {\r\n      var newHeight, newWidth, oldHeight, oldWidth,\r\n        _this = this;\r\n      oldWidth = this.$outerContainer.outerWidth();\r\n      oldHeight = this.$outerContainer.outerHeight();\r\n      newWidth = imageWidth + this.containerLeftPadding + this.containerRightPadding;\r\n      newHeight = imageHeight + this.containerTopPadding + this.containerBottomPadding;\r\n      this.$outerContainer.animate({\r\n        width: newWidth,\r\n        height: newHeight\r\n      }, this.options.resizeDuration, 'swing');\r\n      setTimeout(function() {\r\n        _this.$lightbox.find('.lb-dataContainer').width(newWidth);\r\n        _this.$lightbox.find('.lb-prevLink').height(newHeight);\r\n        _this.$lightbox.find('.lb-nextLink').height(newHeight);\r\n        _this.showImage();\r\n      }, this.options.resizeDuration);\r\n    };\r\n\r\n    Lightbox.prototype.showImage = function() {\r\n      this.$lightbox.find('.lb-loader').hide();\r\n      this.$lightbox.find('.lb-image').fadeIn('slow');\r\n      this.updateNav();\r\n      this.updateDetails();\r\n      this.preloadNeighboringImages();\r\n      this.enableKeyboardNav();\r\n    };\r\n\r\n    Lightbox.prototype.updateNav = function() {\r\n      this.$lightbox.find('.lb-nav').show();\r\n      if (this.album.length > 1) {\r\n        if (this.options.wrapAround) {\r\n          this.$lightbox.find('.lb-prev, .lb-next').show();\r\n        } else {\r\n          if (this.currentImageIndex > 0) {\r\n            this.$lightbox.find('.lb-prev').show();\r\n          }\r\n          if (this.currentImageIndex < this.album.length - 1) {\r\n            this.$lightbox.find('.lb-next').show();\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    Lightbox.prototype.updateDetails = function() {\r\n      var _this = this;\r\n      if (typeof this.album[this.currentImageIndex].title !== 'undefined' && this.album[this.currentImageIndex].title !== \"\") {\r\n        this.$lightbox.find('.lb-caption').html(this.album[this.currentImageIndex].title).fadeIn('fast');\r\n      }\r\n      if (this.album.length > 1 && this.options.showImageNumberLabel) {\r\n        this.$lightbox.find('.lb-number').text(this.options.albumLabel(this.currentImageIndex + 1, this.album.length)).fadeIn('fast');\r\n      } else {\r\n        this.$lightbox.find('.lb-number').hide();\r\n      }\r\n      this.$outerContainer.removeClass('animating');\r\n      this.$lightbox.find('.lb-dataContainer').fadeIn(this.resizeDuration, function() {\r\n        return _this.sizeOverlay();\r\n      });\r\n    };\r\n\r\n    Lightbox.prototype.preloadNeighboringImages = function() {\r\n      var preloadNext, preloadPrev;\r\n      if (this.album.length > this.currentImageIndex + 1) {\r\n        preloadNext = new Image();\r\n        preloadNext.src = this.album[this.currentImageIndex + 1].link;\r\n      }\r\n      if (this.currentImageIndex > 0) {\r\n        preloadPrev = new Image();\r\n        preloadPrev.src = this.album[this.currentImageIndex - 1].link;\r\n      }\r\n    };\r\n\r\n    Lightbox.prototype.enableKeyboardNav = function() {\r\n      $(document).on('keyup.keyboard', $.proxy(this.keyboardAction, this));\r\n    };\r\n\r\n    Lightbox.prototype.disableKeyboardNav = function() {\r\n      $(document).off('.keyboard');\r\n    };\r\n\r\n    Lightbox.prototype.keyboardAction = function(event) {\r\n      var KEYCODE_ESC, KEYCODE_LEFTARROW, KEYCODE_RIGHTARROW, key, keycode;\r\n      KEYCODE_ESC = 27;\r\n      KEYCODE_LEFTARROW = 37;\r\n      KEYCODE_RIGHTARROW = 39;\r\n      keycode = event.keyCode;\r\n      key = String.fromCharCode(keycode).toLowerCase();\r\n      if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {\r\n        this.end();\r\n      } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {\r\n        if (this.currentImageIndex !== 0) {\r\n          this.changeImage(this.currentImageIndex - 1);\r\n        }\r\n      } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {\r\n        if (this.currentImageIndex !== this.album.length - 1) {\r\n          this.changeImage(this.currentImageIndex + 1);\r\n        }\r\n      }\r\n    };\r\n\r\n    Lightbox.prototype.end = function() {\r\n      this.disableKeyboardNav();\r\n      $(window).off(\"resize\", this.sizeOverlay);\r\n      this.$lightbox.fadeOut(this.options.fadeDuration);\r\n      this.$overlay.fadeOut(this.options.fadeDuration);\r\n      return $('select, object, embed').css({\r\n        visibility: \"visible\"\r\n      });\r\n    };\r\n\r\n    return Lightbox;\r\n\r\n  })();\r\n\r\n  $(function() {\r\n    var lightbox, options;\r\n    options = new LightboxOptions();\r\n    return lightbox = new Lightbox(options);\r\n  });\r\n\r\n}).call(this);"],"sourceRoot":"/source/"}